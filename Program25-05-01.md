
# 📘 專案技術備忘 / 傳接用說明檔（for GPT 協作）

## ✅ 已完成項目

### ✅ 地圖與區塊系統
- 地圖為 5×5 區塊（每區 7×7 格，共 35×35）。
- 地圖格子使用等角投影公式放置於 Unity 世界座標。
- 區塊命名採用「**菱型邏輯**」：
  - 最上方菱形頂點為 `A0`
  - 向右為 A→E，向左為 0→4
- 使用 `regionTable<string, RegionData>` 管理每個區塊的探索狀態與建設權限。
- 初始開墾區設定為 `B1` 與 `B2`。

### ✅ 相機與建築模式
- 相機控制、建築模式切換邏輯已建立：
  - 滑鼠右鍵進入／退出建築模式。
  - 建築模式下禁用拖曳、啟用畫面邊緣自動捲動。
  - 控制交由靜態類別 `UIMode` 管理。

## ⚠️ 待處理問題

### 🟥 1. 區塊命名對應錯誤
- 當前的 `GetRegionName(x, y)` 回傳錯誤，情況可能需要重建：
  - 測試區塊位置點 `(17,17)` 映射應為 `C2`
  - 測試區塊位置點`(6,6)` 映射應為 `A0`
  - 測試區塊位置點`(28,6)` 映射應為 `E0`
- 關鍵目標為：**讓玩家視覺上認知為中心的區塊正確命名為 `C2`**
- 不應再執著於固定數值如 `(17,17)` 為中心，其只是格子數位置，並非遊戲內自帶的座標位置，而應依地圖偏移與邏輯推導自動對齊 `C2`，而後再去將格子數位置對應至該大區塊位置

### 🟥 2. 道路建構系統進度低落
- 建築模式中滑鼠拖曳後無預覽圖出現（空格前不可見）
- 道路圖樣（直線／轉角／T 字／十字）判斷尚未即時套用
- 建設完成後也無即時更新相鄰路圖樣
- 道路資料尚未記錄為永久 map state（無儲存重建機制）

## 🟨 建議功能待開發

- `SetRegionExplored(string name)`：供劇情或行動觸發區塊開墾。
- 每格 tile 浮動顯示其所屬 `regionName`（debug 用，建議用 TextMeshPro）。
- 可視化地圖座標系統（例如顯示每格 `(x,y)` 或 tile index）。
- TileData 應擴充為紀錄該格道路類型、是否已建設等資訊。

## 🔧 實用資訊備查

- 區塊數量：`5 × 5`，每大區塊 `7 × 7`
- 地圖總尺寸：`35 × 35`
- 區塊命名：從最上菱形頂點 `A0` 開始，右至 `E0`，下至 `E4`
- 可建區初始僅開放：`B1` 與 `B2`
- 世界中心座標不固定，只需能導出 `C2` 為中心即可
